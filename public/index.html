<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Simple Video Downloader</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{font-family:system-ui;padding:20px;background:#f4f4f6}
    main{max-width:640px;margin:0 auto;background:#fff;padding:18px;border-radius:8px}
    input,select,button{width:100%;padding:8px;margin-top:6px}
  </style>
</head>
<body>
  <main>
    <h2>Simple Video Downloader</h2>
    <form id="f">
      <label>URL<br><input id="url" type="url" required placeholder="https://..."></label>
      <label>Format<br>
        <select id="format"><option value="mp4">MP4</option><option value="mp3">MP3</option></select>
      </label>
      <button type="submit">Download</button>
    </form>
    <div id="out" style="margin-top:12px;"></div>
  </main>
<script>
document.getElementById('f').addEventListener('submit', async e=>{
  e.preventDefault();
  const out=document.getElementById('out');
  out.textContent='Processing...';
  const url=document.getElementById('url').value;
  const format=document.getElementById('format').value;
  try{
    const r=await fetch('/api/download',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({url,format})});
    const j=await r.json();
    if(!r.ok)throw new Error(j.error);
    out.innerHTML='<a href="'+j.download+'">Download '+j.filename+'</a>';
  }catch(err){ out.textContent='Error: '+err.message; }
});
</script>
</body>
</html>
